<?xml version='1.0' encoding='utf-8'?>
<!-- Sample chapter demonstrating R code examples -->
<chapter xml:id="ch_intro_r" xmlns:xi="http://www.w3.org/2001/XInclude">

  <title>Introduction to R</title>
  
  <introduction>
    <p>This chapter provides an introduction to using R for statistical analysis.</p>
  </introduction>

  <section xml:id="sec_basic_r">
    <title>Basic R Commands</title>
    
    <p>
      R can be used as a simple calculator. Here's an example of basic arithmetic:
    </p>
    
    <listing xml:id="listing-r-arithmetic">
      <caption>Basic arithmetic in R</caption>
      <program language="r">
        <input>
# Addition
2 + 3

# Multiplication  
4 * 5

# Division
10 / 2
        </input>
      </program>
    </listing>

    <p>
      You can also assign values to variables:
    </p>

    <program language="r" interactive="yes">
      <input>
# Create variables
x &lt;- 10
y &lt;- 20

# Calculate sum
x + y
      </input>
    </program>

  </section>

  <section xml:id="sec_data_structures">
    <title>Data Structures</title>
    
    <p>
      R has several fundamental data structures. The most basic is the vector:
    </p>

    <listing xml:id="listing-r-vectors">
      <caption>Creating vectors in R</caption>
      <program language="r">
        <input>
# Create a numeric vector
numbers &lt;- c(1, 2, 3, 4, 5)

# Create a character vector
names &lt;- c("Alice", "Bob", "Charlie")

# Display the vectors
print(numbers)
print(names)
        </input>
      </program>
    </listing>

    <example xml:id="example-mean-calculation">
      <title>Calculating Mean</title>
      <statement>
        <p>
          Calculate the mean of a vector of numbers.
        </p>
      </statement>
      <solution>
        <p>
          Here's how to calculate the mean in R:
        </p>
        <program language="r">
          <input>
# Create a vector
data &lt;- c(10, 20, 30, 40, 50)

# Calculate mean
mean(data)
          </input>
        </program>
        <p>
          The <c>mean()</c> function computes the average of all values in the vector.
        </p>
      </solution>
    </example>
    
    <exercise xml:id="exercise-median">
      <statement>
        <p>
          Calculate the median of the following data: 5, 10, 15, 20, 25.
        </p>
      </statement>
      <hint>
        <p>
          Use the <c>median()</c> function in R.
        </p>
      </hint>
      <solution>
        <program language="r">
          <input>
# Create the data vector
data &lt;- c(5, 10, 15, 20, 25)

# Calculate median
median(data)
# Result: 15
          </input>
        </program>
      </solution>
    </exercise>

  </section>

  <section xml:id="sec_visualization">
    <title>Data Visualization</title>
    
    <p>
      R provides powerful tools for creating visualizations. This section demonstrates
      how to create basic plots and include images in your analysis.
    </p>
    
    <figure xml:id="fig-sample-image">
      <caption>Sample figure demonstrating image support in PreTeXt</caption>
      <image source="frog.jpg" width="50%">
        <description>A sample image showing image support in the PreTeXt book</description>
      </image>
    </figure>
    
    <p>
      Images can be generated by R code or included as static files. The above figure
      demonstrates how images are displayed in the PreTeXt book format.
    </p>
    
    <example xml:id="example-plot-code">
      <title>Creating a Simple Plot in R</title>
      <statement>
        <p>
          Generate a scatter plot of random data.
        </p>
      </statement>
      <solution>
        <program language="r">
          <input>
# Generate random data
x &lt;- 1:10
y &lt;- rnorm(10, mean = 5, sd = 2)

# Create scatter plot
plot(x, y, 
     main = "Sample Scatter Plot",
     xlab = "X values", 
     ylab = "Y values",
     pch = 19,
     col = "blue")

# Add a line
abline(lm(y ~ x), col = "red", lwd = 2)
          </input>
        </program>
        <p>
          This code creates a scatter plot with a regression line. In practice, 
          this would generate an image that could be included in the document.
        </p>
      </solution>
    </example>

  </section>

</chapter>
